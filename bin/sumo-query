#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../lib/sumologic'

begin
  Sumologic::CLI.start(ARGV)
rescue Sumologic::TimeoutError => e
  warn "\nTimeout Error: #{e.message}"
  warn "\nTry:"
  warn '  - Reducing time range'
  warn '  - Using more specific filters in your query'
  warn '  - Adding --limit to cap results'
  exit 1
rescue Sumologic::Error => e
  warn "\nError: #{e.message}"
  exit 1
rescue StandardError => e
  warn "\nUnexpected Error: #{e.message}"
  warn e.backtrace.first(5).join("\n") if $DEBUG
  exit 1
rescue Interrupt
  warn "\nInterrupted by user"
  exit 130
end
